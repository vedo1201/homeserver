ğŸ”§ 1. Instalacija Flask paketa
bash
Copy
Edit
sudo apt update
sudo apt install python3-pip -y
pip3 install flask
âœ… Ovo instalira Python i Flask koji nam treba za web servis.

ğŸ“ 2. Kreiranje Flask aplikacije za shutdown
bash
Copy
Edit
nano /home/korisnik/shutdown_server.py
Ubaci sledeÄ‡i kod (zameni korisnik ako je potrebno):

python
Copy
Edit
from flask import Flask, request
import os

app = Flask(__name__)

TOKEN = "tajnitoken123"

@app.route('/shutdown')
def shutdown():
    token = request.args.get('token')
    if token != TOKEN:
        return "Neautorizovan pristup.", 403

    os.system("sudo shutdown now")
    return "Server se gasi..."

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
âœ… Ova aplikacija pokreÄ‡e shutdown samo ako se prosledi taÄan token.

ğŸ” 3. Dozvoli shutdown bez lozinke
bash
Copy
Edit
sudo visudo
Na dno fajla dodaj:

sql
Copy
Edit
korisnik ALL=(ALL) NOPASSWD: /sbin/shutdown
âœ… Ovo omoguÄ‡ava Flask aplikaciji da izvrÅ¡i shutdown bez potrebe za root lozinkom.

âš™ï¸ 4. Napravi systemd servis da Flask startuje pri paljenju servera
bash
Copy
Edit
sudo nano /etc/systemd/system/shutdown-web.service
Ubaci:

ini
Copy
Edit
[Unit]
Description=Flask server za shutdown
After=network.target

[Service]
User=korisnik
WorkingDirectory=/home/korisnik
ExecStart=/usr/bin/python3 /home/korisnik/shutdown_server.py
Restart=always

[Install]
WantedBy=multi-user.target
âœ… Servis se startuje automatski i Flask aplikacija uvek radi u pozadini.

â–¶ï¸ 5. Aktiviraj i startuj servis
bash
Copy
Edit
sudo systemctl daemon-reexec
sudo systemctl daemon-reload
sudo systemctl enable shutdown-web.service
sudo systemctl start shutdown-web.service
âœ… Ovim se Flask aplikacija pokreÄ‡e automatski nakon svakog restartovanja servera.

âœ… 6. UgaÅ¡avanje servera klikom na link
Otvorite iz browsera (raÄunar ili telefon u mreÅ¾i):

perl
Copy
Edit
http://IP_ADRESA_SERVERA:5000/shutdown?token=tajnitoken123
Zameni IP_ADRESA_SERVERA sa pravom IP adresom servera.

âœ… Kada klikneÅ¡ na ovaj link, server se automatski gasi ako je token taÄan.
